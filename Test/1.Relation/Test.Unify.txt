using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using CSharpLogic;
using NUnit.Framework;

namespace AlgebraGeometry
{
    [TestFixture]
    public class TestLineUnify
    {
        #region Line Unify from two points

        [Test]
        public void Test_CreateLine_1()
        {
            //x-y+1=0
            var pt1 = new Point(1.0, 2.0);
            var pt2 = new Point(2.0, 3.0);
            var ptSym1 = new PointSymbol(pt1);
            var ptSym2 = new PointSymbol(pt2);
            var lineSym = LineRelation.Unify(ptSym1, ptSym2);
            Assert.NotNull(lineSym);
            var line = lineSym.Shape as Line;
            Assert.NotNull(line);
            Assert.True(line.A.Equals(1.0));
            Assert.True(line.B.Equals(-1.0));
            Assert.True(line.C.Equals(1.0));
        }

        [Test]
        public void Test_CreateLine_2()
        {
            var pt1 = new Point(1.0, 2.0);
            var pt2 = new Point(1.0, 2.0);
            var ptSym1 = new PointSymbol(pt1);
            var ptSym2 = new PointSymbol(pt2);
            var line = LineRelation.Unify(ptSym1, ptSym2);
            Assert.Null(line);
        }

        [Test]
        public void Test_CreateLine_3()
        {
            var pt1 = new Point(2.0, 1.0);
            var pt2 = new Point(3.0, 1.0);
            var ptSym1 = new PointSymbol(pt1);
            var ptSym2 = new PointSymbol(pt2);
            var lineSym = LineRelation.Unify(ptSym1, ptSym2);
            Assert.NotNull(lineSym);
            var line = lineSym.Shape as Line;
            Assert.NotNull(line);
            Assert.Null(line.A);
            Assert.True(line.B.Equals(1.0));
            Assert.True(line.C.Equals(-1.0));
        }

        [Test]
        public void Test_CreateLine_4()
        {
            var pt1 = new Point(2.0, 1.0);
            var pt2 = new Point(2.0, 2.0);
            var ptSym1 = new PointSymbol(pt1);
            var ptSym2 = new PointSymbol(pt2);
            var lineSym = LineRelation.Unify(ptSym1, ptSym2);
            Assert.NotNull(lineSym);
            var line = lineSym.Shape as Line;
            Assert.NotNull(line);
            Assert.True(line.A.Equals(1.0));
            Assert.Null(line.B);
            Assert.True(line.C.Equals(-2.0));
        }

        #endregion

        #region Line Unify from two Goals

        [Test]
        public void Test_CreateLine_TwoGoal_1()
        {
            var m = new Var('m');
            var k = new Var('k');
            var goal1 = new EqGoal(m, 2.0);
            var goal2 = new EqGoal(k, 1.0);

            Line line = LineRelation.Unify(goal1, goal2);
            Assert.NotNull(line);
            Assert.True(line.Concrete);
            Assert.True(line.Slope.Equals(2.0));
            Assert.True(line.Intercept.Equals(1.0));
        }

        [Test]
        public void Test_CreateLine_TwoGoal_2()
        {
            var m = new Var('m');
            var k = new Var('g');
            var goal1 = new EqGoal(m, 2.0);
            var goal2 = new EqGoal(k, 1.0);

            Line line = LineRelation.Unify(goal1, goal2);
            Assert.Null(line);
        }

        #endregion

        #region LineSegment Unify from two points

        [Test]
        public void Test_CreateLineSegment_1()
        {
            var pt1 = new Point(1.0, 2.0);
            var pt2 = new Point(2.0, 3.0);
            var lineSeg = LineSegRelation.Unify(pt1, pt2);
            Assert.NotNull(lineSeg);
        }

        [Test]
        public void Test_CreateLineSegment_2()
        {
            var pt1 = new Point(1.0, 2.0);
            var pt2 = new Point(1.0, 2.0);
            var lineSeg = LineSegRelation.Unify(pt1, pt2);
            Assert.Null(lineSeg);
        }

        #endregion
    }
}
